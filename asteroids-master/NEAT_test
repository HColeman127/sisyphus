from NEAT_Individual import *
from MyGame import MyGame

try:
    import cPickle as pickle
except ModuleNotFoundError:
    import pickle



def main():

    file_loc = "data/best_individuals_2019-02-26-110643.dat"
    file_pi = open(file_loc, 'rb')
    pop = pickle.load(file_pi)
    print(pop[0])

    game = MyGame(display=True)
    individual = pop[0]
    max_steps = 10000

    node_list = individual.genome.get_sorted_nodes_by_depth()

    playing, score, obs = game.reset()

    step_number = 0
    playing = True
    while playing and step_number < max_steps:
        commands = individual.genome.evaluate(node_list, obs)
        playing, score, hits, shots, obs = game.step(commands)
        step_number += 1


main()